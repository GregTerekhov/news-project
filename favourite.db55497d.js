!function(){var n="HAVE_READ",t="READ_URL",e="FAVORITES",a=document.querySelector(".js-articles-favourites");function r(n){n.remove()}function i(n){return String(n).padStart(2,"0")}function o(n){try{return JSON.parse(localStorage.getItem(n))}catch(n){console.log(n)}}function c(n,t){try{localStorage.setItem(n,JSON.stringify(t))}catch(n){console.log(n)}}a.addEventListener("click",(function(n){if(!n.target.hasAttribute("data-info"))return;var t=n.target.closest(".markup-unit"),a=n.target.dataset.id,i=o(e);if(!i)return void console.log("News isn't in favorites");var s=i.find((function(n,t){if(n.link===a)return t}));if(i.splice(s,1),0===i.length)return localStorage.removeItem("FAVORITES"),void r(t);c(e,i),r(t)})),function(n){var e=o(n);if(!e||0===e.length)return void alert("Добавьте страницу заглушку пожалуйста. Файл favourite.js, 19-строка");r=e,i=r.map((function(n){var e=n.title,a=n.category,r=n.date,i=n.link,c=n.description,s=n.imageURL,u=JSON.stringify(n),l="display: none;";return(l=function(n,t){if(n&&0!==n.length)return n.some((function(n){return n===t}))?"display: flex;":"display: none;"}(o(t),i))||(l="display: none;"),'<li class="markup-unit markup-unit__read" name="card">\n    <p class="markup-unit__section">'.concat(a,'</p>\n    <p class="markup-unit__already-read" style=\'').concat(l,'\'>Already read\n    <svg class="markup-unit__icon-check" width="18" height="18" viewBox="0 0 37 32">\n      <path stroke="#00DD73" stroke-linejoin="miter" stroke-linecap="square" stroke-miterlimit="4" stroke-width="2.2857" d="M28.779 6.389c-0.288 0.009-0.546 0.131-0.732 0.323l-16.313 16.313-6.713-6.713c-0.195-0.209-0.473-0.339-0.78-0.339-0.589 0-1.067 0.478-1.067 1.067 0 0.308 0.13 0.585 0.339 0.78l0.001 0.001 7.467 7.467c0.193 0.193 0.459 0.312 0.754 0.312s0.561-0.119 0.754-0.312v0l17.067-17.067c0.199-0.194 0.323-0.465 0.323-0.765 0-0.589-0.478-1.067-1.067-1.067-0.011 0-0.022 0-0.033 0l0.002-0z"></path>\n    </svg>\n    </p>\n    <img \n        class="markup-unit__card-image" \n        src="').concat(s,'" \n        alt="placeholder"\n        />\n    <button \n        class="markup-unit__add-favorite js-fbutton js-favorites" \n        type="button" \n        data-info\n        data-favorite=\'').concat(u,"'\n        data-id='").concat(i,"'\n      >\n      <p \n        class=\"markup-unit__favorite-text js-fbutton\"\n        data-favorite='").concat(u,"'\n        style=\"pointer-events: none;\"\n      >\n          Remove from favourites\n      </p>\n      <svg \n          data-favorite='").concat(u,'\'  \n          class="markup-unit__favorite-icon markup-unit__favorite-icon--active js-fbutton" \n          width="15" \n          height="15" \n          viewBox="0 0 37 32"\n          style="pointer-events: none;"\n        >\n        <path style="stroke: var(--color1, #4440f7)" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="4" stroke-width="2.2857" d="M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z"></path>\n      </svg>\n    </button>\n    <h2 class="markup-unit__card-header" name="card_header">\n        ').concat(e,'\n    </h2>\n    <p class="markup-unit__card-text" name="card_text">\n        ').concat(c,'\n    </p>\n    <div class="markup-unit__card-footer">\n        <p class="markup-unit__card-date">').concat(r,'</p>\n      <a \n        class="markup-unit__read-more" \n        href="').concat(i,'" \n        name="read_more"\n        data-favorite=\'').concat(u,"'\n      >\n          Read more\n      </a>\n    </div>\n    </li>")})).join(" "),a.innerHTML=i;var r,i}(e),a.addEventListener("click",(function(e){if(e.preventDefault(),!e.target.classList.contains("markup-unit__read-more"))return;var a=(l=new Date,d=i(l.getDate()),f=i(l.getMonth()+1),p=i(l.getFullYear()),"".concat(d,"/").concat(f,"/").concat(p)),r=function(n){try{return JSON.parse(n)}catch(n){console.log(n)}}(e.target.dataset.favorite),s=o(t),u=o(n);var l,d,f,p;(function(n,t,e){if(n){return void(n.some((function(n){return n===t}))||(n.push(t),c(e,n)))}c(e,[t])})(s,r.link,t),function(n,t,e,a){if(n){var r=[];if(n.forEach((function(n){var e=n.newsArray.some((function(n){return n.link===t.link}));r.push(e)})),!r.some((function(n){return n}))){if(n.some((function(n){return n.whenRead===e}))){var i=n.map((function(n){var a=n.whenRead,r=n.newsArray;if(a===e)return r.push(t),{whenRead:a,newsArray:r}}));return console.log(i),void c(a,i)}var o={whenRead:e,newsArray:[t]};n.push(o),c(a,n)}return}var s=[],u={whenRead:e,newsArray:[t]};s.push(u),c(a,s)}(u,r,a,n)}))}();
//# sourceMappingURL=favourite.db55497d.js.map
