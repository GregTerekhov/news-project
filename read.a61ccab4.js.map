{"mappings":"AAGA,IAAIA,EAAY,GAEKC,SAASC,cAAc,gBAA5C,MACMC,EAAmBF,SAASC,cAAc,mBA+KhD,SAASE,EAAuBC,GAC5B,IACI,OAAOC,KAAKC,MAAMC,aAAaC,QAAQJ,G,CACzC,MAAOK,GACLC,QAAQC,IAAIF,E,EAeK,SAAhBG,EAAuBR,EAAKS,GACjC,IACIN,aAAaO,QAAQV,EAAKC,KAAKU,UAAUF,G,CAC3C,MAAOJ,GACLC,QAAQC,IAAIF,E,EApMYP,EAAfc,iBAAiB,SAMM,SAAfC,GACrB,IAAKA,EAAMC,OAAOC,aAAa,aAAc,OAExB,MAAfC,EA6KkB,SAALC,GACnB,IACI,OAAOhB,KAAKC,MAAMe,E,CACpB,MAAOZ,GACLC,QAAQC,IAAIF,E,EAjLOa,CAAcL,EAAMC,OAAOK,QAAQC,UACpDC,EAAwBtB,EAhBZ,aAkByB,GAAvCc,EAAMC,OAAOQ,UAAUC,SAAS,gBAAiB,CAMF,GAJ/CV,EAAMC,OAAOU,YAAc,mBAEMX,EAA3BC,OAAOQ,UAAUG,OAAO,iBAEzBJ,EAED,YADAf,QAAQC,IAAI,2BAIhB,MAAMmB,EAAQL,EAAsBM,MAAK,CAACC,EAAMC,KAC5C,GAAID,EAAKE,OAASd,EAAec,KAC7B,OAAOD,CAAK,IAMI,OAFxBR,EAAsBU,OAAOL,EAAO,GAEC,IAAjCL,EAAsBW,YACtB7B,aAAa8B,WAAW,kBAI5BzB,EA1Cc,YA0CwBa,E,CASO,GAJjCR,EAAVC,OAAOU,YAAc,wBAEMX,EAA3BC,OAAOQ,UAAUY,IAAI,gBAEvBb,EAAuB,CAGuB,GAFnBA,EAAsBc,MAAKP,GAAQA,EAAKE,OAASd,EAAec,OAIvF,YADAxB,QAAQC,IAAI,6BAIhBZ,EAAY,IAAI0B,E,CAGpB1B,EAAUyC,KAAKpB,GAEsCR,EAhEnC,YAgEoBb,GAEbA,EAAb,E,IAKqB,SAAZK,GACrB,MAAMqB,EAAwBtB,EAAuBC,GAET,IAAvCqB,GAA0D,IAAjCA,EAAsBW,OAEJ,YAD5CK,MAAM,kEAQcC,EAJLjB,EAKnBiB,EAAMC,SAAQC,IAEV,MAAMC,EA8EH,0KA9EmCD,EAiFhBE,0gBAhF+C5C,EAApD6C,mBAAmB,YAAaF,GAG1B7C,SAASC,cAAc,yBAG/B+C,UAAYJ,EAAKK,UAAUC,KAAIC,IAC1C,MAAMC,MAAEA,EAAKC,SAAEA,EAAQC,KAAEA,EAAIpB,KAAEA,EAAIqB,YAAEA,EAAWC,SAAEA,GAAaL,EACzD3B,EAAWnB,KAAKU,UAAUoC,GAIc,IAA1CM,EA2GhB,SAA8Bf,EAAOgB,GACjC,GAAKhB,GAA0B,IAAjBA,EAAMN,OAIpB,OADsBM,EAAMH,MAAKoB,GAAQA,EAAKzB,OAASwB,IAE5C,CACHE,MAAO,eACPC,UAAW,yBAGR,CACHD,MAAO,YACPC,UAAW,oB,CAxHYC,CADD3D,EAlGZ,aAmGiD+B,GAQ3D,OAPKuB,IACDA,EAAmB,CACfG,MAAO,YACPC,UAAW,sBAIZ,+FACmBR,kFAIvBG,iHAIuCC,EAAiBG,8EAG9CpC,wBACNU,yGAIMV,iEAGbiC,EAAiBI,gEAGFrC,+uBAWjB4B,kFAGAG,sGAGkCD,4EAG5BpB,yDAESV,qEAKf,IACCuC,KAAK,IAAI,IA3EE,IAAMrB,C,CA3EQsB,CAVnB","sources":["src/read.js"],"sourcesContent":["const READ_KEY = \"HAVE_READ\"; // ключ для массива прочитанных новостей в Локальном Хранилище\nconst READ_URL_KEY = \"READ_URL\"; // ключ для массива URL прочитанных новостей в Локальном Хранилище\nconst FAVORITES_KEY = \"FAVORITES\";\nlet favorites = [];\n\nconst accordionRef = document.querySelector(\".js-haveread\"); // получаем ссылку на секцию аккордиона\nconst accordionListRef = document.querySelector(\".accordion-list\"); // получаем ссылку на панель с новостями\n\naccordionListRef.addEventListener(\"click\", onFavoriteClick); // делегируем слушание на секцию аккордиона\n\nonOpenFavorites(READ_KEY);\n\n\n//====== Функция-обработчик нажатия на кнопку Фавориты ==================\nfunction onFavoriteClick(event) {\n    if (!event.target.hasAttribute(\"data-info\")) return;// проверка туда ли тырнули\n    \n    const parsedCardData = makeParseJson(event.target.dataset.favorite); // получаем объект данных с карточки которая находится на странице\n    const dataFromLocaleStorage = onGetLocaleStorageData(FAVORITES_KEY); // получаем массив объектов из Локального Хранилища\n\n    if (event.target.classList.contains(\"js-favorites\")) {// проверка условия содержит ли кнопка класс-метку что новость уже добавлена в избранное\n\n        event.target.textContent = \"Add to favorites\"; // изменение текстового контента кнопки\n\n        event.target.classList.remove(\"js-favorites\"); // убираем класс-метку что карточка добавлена в избранное\n\n        if (!dataFromLocaleStorage) { // проверка на null из пустого Локального Хранилища \n            console.log(\"News isn't in favorites\");\n            return;\n        };\n\n        const index = dataFromLocaleStorage.find((card, index) => { // получаем индекс нужной карточки\n            if (card.link === parsedCardData.link) {\n                return index;\n            }\n        });\n\n        dataFromLocaleStorage.splice(index, 1) // удаляем карточку по индексу\n\n        if (dataFromLocaleStorage.length === 0) { // проверяем пустой массив или нет\n            localStorage.removeItem('FAVORITES');\n            return;\n        }\n\n        onSetLocaleStorageData(FAVORITES_KEY, dataFromLocaleStorage); // сетаем в локальное хранилище модифицированный массив\n\n        return;        \n    }\n    //В противном случае==========//\n    event.target.textContent = \"Remove from favorites\"; // изменение текстового контента кнопки\n\n    event.target.classList.add(\"js-favorites\"); // добавляем класс-метку что карточка добавлена в избранное\n\n    if (dataFromLocaleStorage) { // проверка на возврат null из пустого массива\n        const findPresenceResult = dataFromLocaleStorage.some(card => card.link === parsedCardData.link); // получаем булевое значение есть ли новость в избранном\n\n        if (findPresenceResult) { // делаем условие новости на присутствие в Локальном Хранилище в избранном\n            console.log(\"It's allredy in Favorites\");\n            return;\n        }\n\n        favorites = [...dataFromLocaleStorage]; // распыляем в массив \"Фавориты\" данные из массива полученные из Локального хранилища\n    }\n\n    favorites.push(parsedCardData); // добавляем объект с данными карточки новости в массив \"Фавориты\"\n\n    onSetLocaleStorageData(FAVORITES_KEY, favorites); // сетаем в локальное хранилище\n\n    favorites = []; // очищаем массив \"Фавориты\"\n\n}\n\n//=============== Функция при открытии страныцы \"Прочитанные\" ==================================\nfunction onOpenFavorites(key) {\n    const dataFromLocaleStorage = onGetLocaleStorageData(key); // получаем данные из избранных в Локальном Хранилище\n    \n    if (!dataFromLocaleStorage || dataFromLocaleStorage.length === 0) { // проверка на null или пустой массив\n        alert(\"Добавьте страницу заглушку пожалуйста. Файл read.js, 78-строка\");\n        return;\n    }\n\n    onCreateReadMurkup(dataFromLocaleStorage);\n}\n\n//============== Функция рендера разметки ======================================\nfunction onCreateReadMurkup(array) {\n    array.forEach(date => { // перебираем массив с объектами со свойством даты и массивом новостей\n        \n        const firstMurkup = createFirstMurkup(date); // создаем разметку секции аккордеона с датой для новостей (разметка первого уровня)\n        accordionListRef.insertAdjacentHTML(\"beforeend\", firstMurkup); // рендерим эту разметку \n\n        \n        const accordionPanel = document.querySelector(\".accordion-list_panel\"); // получаем ссылку на новосозданный элемент\n        \n\n        accordionPanel.innerHTML = date.newsArray.map(newsObject => {// рендерим разметку непосредственно новостей (разметка второго внутреннего уровня)\n            const { title, category, date, link, description, imageURL } = newsObject;\n            const favorite = JSON.stringify(newsObject);\n\n            //Логика проверки наличия новости в Фаворитах ------------------------------------------\n            const fromFavorites = onGetLocaleStorageData(FAVORITES_KEY); // получаем массив из фаворитов из Локального Хранилища\n            let configReadMarkup = checkFavouritesByUrl(fromFavorites, link) //по результату проверки возвращается объект настроек который используется для добавления динамических свойств в разметку\n            if (!configReadMarkup) {// на случай undefined\n                configReadMarkup = {\n                    class: \"zaglushka\",\n                    addRemove: \"Add to favourites\"\n                }\n            }\n            //--------------------------------------------------------------------------------------\n            return `<li class=\"markup-unit markup-unit__read\" name=\"card\">\n    <p class=\"markup-unit__section\">${category}</p>\n    \n    <img \n        class=\"markup-unit__card-image\" \n        src=\"${imageURL}\" \n        alt=\"placeholder\"\n        />\n    <button \n        class=\"markup-unit__add-favorite js-fbutton ${configReadMarkup.class}\" \n        type=\"button\" \n        data-info\n        data-favorite='${favorite}'\n        data-id='${link}'\n      >\n      <p \n        class=\"markup-unit__favorite-text js-fbutton\"\n        data-favorite='${favorite}'\n        style=\"pointer-events: none;\"\n      >\n          ${configReadMarkup.addRemove}\n      </p>\n      <svg \n          data-favorite='${favorite}'  \n          class=\"markup-unit__favorite-icon markup-unit__favorite-icon--active js-fbutton\" \n          width=\"15\" \n          height=\"15\" \n          viewBox=\"0 0 37 32\"\n          style=\"pointer-events: none;\"\n        >\n        <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n      </svg>\n    </button>\n    <h2 class=\"markup-unit__card-header\" name=\"card_header\">\n        ${title}\n    </h2>\n    <p class=\"markup-unit__card-text\" name=\"card_text\">\n        ${description}\n    </p>\n    <div class=\"markup-unit__card-footer\">\n        <p class=\"markup-unit__card-date\">${date}</p>\n      <a \n        class=\"markup-unit__read-more\" \n        href=\"${link}\" \n        name=\"read_more\"\n        data-favorite='${favorite}'\n      >\n          Read more\n      </a>\n    </div>\n    </li>`; \n        }).join(\" \");\n\n    });\n}\n\nfunction createFirstMurkup(obj) {\n    return `<li class=\"accordion-list_item\">\n                <div class=\"accordion-title_wrapper\">\n                    <p class=\"accordion-list_title\">\n                        ${obj.whenRead}\n                    </p>\n                    <div class=\"accordion-arrow__wraper\">\n                        <svg width=\"15\" height=\"9\" viewBox=\"0 0 15 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M1.7625 9L-3.18545e-07 7.28745L7.5 3.27835e-07L15 7.28745L13.2375 9L7.5 3.43725L1.7625 9Z\" fill=\"#111321\"/>\n                        </svg>\n                    </div>\n                </div>\n                <div class=\"accordion-list_panel\"></div>\n            </li>`;\n}\n\nfunction onGetLocaleStorageData(key) {\n    try {\n        return JSON.parse(localStorage.getItem(key)); // получаем массив объектов из Локального Хранилища\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n//========== Функция парсинга данных из JSON файла =================================================\nfunction makeParseJson(stringData) {\n    try {\n        return JSON.parse(stringData);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\n//========== Функкция Добавления Данных в Locale Storage ========================================\nfunction onSetLocaleStorageData(key, data) {\n    try {\n        localStorage.setItem(key, JSON.stringify(data));\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nfunction checkFavouritesByUrl(array, newsLink) {\n    if (!array || array.length === 0) { // проверка на null или пустой массив\n        return;\n    }\n    const compareResult = array.some(item => item.link === newsLink);\n    if (compareResult) {\n        return {\n            class: \"js-favorites\",\n            addRemove: \"Remove from favorites\"\n        };\n    } else {\n        return {\n            class: \"zaglushka\",\n            addRemove: \"Add to favourites\"\n        };\n    }\n     \n}"],"names":["$56697b3ed36fb081$var$favorites","document","querySelector","$56697b3ed36fb081$var$accordionListRef","$56697b3ed36fb081$var$onGetLocaleStorageData","key","JSON","parse","localStorage","getItem","error","console","log","$56697b3ed36fb081$var$onSetLocaleStorageData","data","setItem","stringify","addEventListener","event","target","hasAttribute","parsedCardData","stringData","$56697b3ed36fb081$var$makeParseJson","dataset","favorite","dataFromLocaleStorage","classList","contains","textContent","remove","index1","find","card","index","link","splice","length","removeItem","add","some","push","alert","array","forEach","date1","firstMurkup","whenRead","insertAdjacentHTML","innerHTML","newsArray","map","newsObject","title","category","date","description","imageURL","configReadMarkup","newsLink","item","class","addRemove","$56697b3ed36fb081$var$checkFavouritesByUrl","join","$56697b3ed36fb081$var$onOpenFavorites"],"version":3,"file":"read.a61ccab4.js.map"}