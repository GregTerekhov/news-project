{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_array_without_holes.js","node_modules/@swc/helpers/lib/_array_like_to_array.js","node_modules/@swc/helpers/lib/_iterable_to_array.js","node_modules/@swc/helpers/lib/_non_iterable_spread.js","node_modules/@swc/helpers/lib/_unsupported_iterable_to_array.js","node_modules/@swc/helpers/lib/_to_consumable_array.js","src/read.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _arrayWithoutHoles;\nvar _arrayLikeToArray = _interopRequireDefault(require(\"./_array_like_to_array\"));\nfunction _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return (0, _arrayLikeToArray).default(arr);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _arrayLikeToArray;\nfunction _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];\n    return arr2;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _iterableToArray;\nfunction _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _nonIterableSpread;\nfunction _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _unsupportedIterableToArray;\nvar _arrayLikeToArray = _interopRequireDefault(require(\"./_array_like_to_array\"));\nfunction _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return (0, _arrayLikeToArray).default(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return (0, _arrayLikeToArray).default(o, minLen);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _toConsumableArray;\nvar _arrayWithoutHoles = _interopRequireDefault(require(\"./_array_without_holes\"));\nvar _iterableToArray = _interopRequireDefault(require(\"./_iterable_to_array\"));\nvar _nonIterableSpread = _interopRequireDefault(require(\"./_non_iterable_spread\"));\nvar _unsupportedIterableToArray = _interopRequireDefault(require(\"./_unsupported_iterable_to_array\"));\nfunction _toConsumableArray(arr) {\n    return (0, _arrayWithoutHoles).default(arr) || (0, _iterableToArray).default(arr) || (0, _unsupportedIterableToArray).default(arr) || (0, _nonIterableSpread).default();\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","const READ_KEY = \"HAVE_READ\"; // ключ для массива прочитанных новостей в Локальном Хранилище\nconst READ_URL_KEY = \"READ_URL\"; // ключ для массива URL прочитанных новостей в Локальном Хранилище\nconst FAVORITES_KEY = \"FAVORITES\";\nlet favorites = [];\n\nconst accordionRef = document.querySelector(\".js-haveread\"); // получаем ссылку на секцию аккордиона\nconst accordionListRef = document.querySelector(\".accordion-list\"); // получаем ссылку на панель с новостями\n\naccordionListRef.addEventListener(\"click\", onFavoriteClick); // делегируем слушание на секцию аккордиона\n\nonOpenFavorites(READ_KEY);\n\n\n//====== Функция-обработчик нажатия на кнопку Фавориты ==================\nfunction onFavoriteClick(event) {\n    if (!event.target.hasAttribute(\"data-info\")) return;// проверка туда ли тырнули\n    \n    const parsedCardData = makeParseJson(event.target.dataset.favorite); // получаем объект данных с карточки которая находится на странице\n    const dataFromLocaleStorage = onGetLocaleStorageData(FAVORITES_KEY); // получаем массив объектов из Локального Хранилища\n\n    if (event.target.classList.contains(\"js-favorites\")) {// проверка условия содержит ли кнопка класс-метку что новость уже добавлена в избранное\n\n        event.target.textContent = \"Add to favorites\"; // изменение текстового контента кнопки\n\n        event.target.classList.remove(\"js-favorites\"); // убираем класс-метку что карточка добавлена в избранное\n\n        if (!dataFromLocaleStorage) { // проверка на null из пустого Локального Хранилища \n            console.log(\"News isn't in favorites\");\n            return;\n        };\n\n        const index = dataFromLocaleStorage.find((card, index) => { // получаем индекс нужной карточки\n            if (card.link === parsedCardData.link) {\n                return index;\n            }\n        });\n\n        dataFromLocaleStorage.splice(index, 1) // удаляем карточку по индексу\n\n        if (dataFromLocaleStorage.length === 0) { // проверяем пустой массив или нет\n            localStorage.removeItem('FAVORITES');\n            return;\n        }\n\n        onSetLocaleStorageData(FAVORITES_KEY, dataFromLocaleStorage); // сетаем в локальное хранилище модифицированный массив\n\n        return;        \n    }\n    //В противном случае==========//\n    event.target.textContent = \"Remove from favorites\"; // изменение текстового контента кнопки\n\n    event.target.classList.add(\"js-favorites\"); // добавляем класс-метку что карточка добавлена в избранное\n\n    if (dataFromLocaleStorage) { // проверка на возврат null из пустого массива\n        const findPresenceResult = dataFromLocaleStorage.some(card => card.link === parsedCardData.link); // получаем булевое значение есть ли новость в избранном\n\n        if (findPresenceResult) { // делаем условие новости на присутствие в Локальном Хранилище в избранном\n            console.log(\"It's allredy in Favorites\");\n            return;\n        }\n\n        favorites = [...dataFromLocaleStorage]; // распыляем в массив \"Фавориты\" данные из массива полученные из Локального хранилища\n    }\n\n    favorites.push(parsedCardData); // добавляем объект с данными карточки новости в массив \"Фавориты\"\n\n    onSetLocaleStorageData(FAVORITES_KEY, favorites); // сетаем в локальное хранилище\n\n    favorites = []; // очищаем массив \"Фавориты\"\n\n}\n\n//=============== Функция при открытии страныцы \"Прочитанные\" ==================================\nfunction onOpenFavorites(key) {\n    const dataFromLocaleStorage = onGetLocaleStorageData(key); // получаем данные из избранных в Локальном Хранилище\n    \n    if (!dataFromLocaleStorage || dataFromLocaleStorage.length === 0) { // проверка на null или пустой массив\n        alert(\"Добавьте страницу заглушку пожалуйста. Файл read.js, 78-строка\");\n        return;\n    }\n\n    onCreateReadMurkup(dataFromLocaleStorage);\n}\n\n//============== Функция рендера разметки ======================================\nfunction onCreateReadMurkup(array) {\n    array.forEach(date => { // перебираем массив с объектами со свойством даты и массивом новостей\n        \n        const firstMurkup = createFirstMurkup(date); // создаем разметку секции аккордеона с датой для новостей (разметка первого уровня)\n        accordionListRef.insertAdjacentHTML(\"beforeend\", firstMurkup); // рендерим эту разметку \n\n        \n        const accordionPanel = document.querySelector(\".accordion-list_panel\"); // получаем ссылку на новосозданный элемент\n        \n\n        accordionPanel.innerHTML = date.newsArray.map(newsObject => {// рендерим разметку непосредственно новостей (разметка второго внутреннего уровня)\n            const { title, category, date, link, description, imageURL } = newsObject;\n            const favorite = JSON.stringify(newsObject);\n\n            //Логика проверки наличия новости в Фаворитах ------------------------------------------\n            const fromFavorites = onGetLocaleStorageData(FAVORITES_KEY); // получаем массив из фаворитов из Локального Хранилища\n            let configReadMarkup = checkFavouritesByUrl(fromFavorites, link) //по результату проверки возвращается объект настроек который используется для добавления динамических свойств в разметку\n            if (!configReadMarkup) {// на случай undefined\n                configReadMarkup = {\n                    class: \"zaglushka\",\n                    addRemove: \"Add to favourites\"\n                }\n            }\n            //--------------------------------------------------------------------------------------\n            return `<li class=\"markup-unit markup-unit__read\" name=\"card\">\n    <p class=\"markup-unit__section\">${category}</p>\n    \n    <img \n        class=\"markup-unit__card-image\" \n        src=\"${imageURL}\" \n        alt=\"placeholder\"\n        />\n    <button \n        class=\"markup-unit__add-favorite js-fbutton ${configReadMarkup.class}\" \n        type=\"button\" \n        data-info\n        data-favorite='${favorite}'\n        data-id='${link}'\n      >\n      <p \n        class=\"markup-unit__favorite-text js-fbutton\"\n        data-favorite='${favorite}'\n        style=\"pointer-events: none;\"\n      >\n          ${configReadMarkup.addRemove}\n      </p>\n      <svg \n          data-favorite='${favorite}'  \n          class=\"markup-unit__favorite-icon markup-unit__favorite-icon--active js-fbutton\" \n          width=\"15\" \n          height=\"15\" \n          viewBox=\"0 0 37 32\"\n          style=\"pointer-events: none;\"\n        >\n        <path style=\"stroke: var(--color1, #4440f7)\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"4\" stroke-width=\"2.2857\" d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"></path>\n      </svg>\n    </button>\n    <h2 class=\"markup-unit__card-header\" name=\"card_header\">\n        ${title}\n    </h2>\n    <p class=\"markup-unit__card-text\" name=\"card_text\">\n        ${description}\n    </p>\n    <div class=\"markup-unit__card-footer\">\n        <p class=\"markup-unit__card-date\">${date}</p>\n      <a \n        class=\"markup-unit__read-more\" \n        href=\"${link}\" \n        name=\"read_more\"\n        data-favorite='${favorite}'\n      >\n          Read more\n      </a>\n    </div>\n    </li>`; \n        }).join(\" \");\n\n    });\n}\n\nfunction createFirstMurkup(obj) {\n    return `<li class=\"accordion-list_item\">\n                <div class=\"accordion-title_wrapper\">\n                    <p class=\"accordion-list_title\">\n                        ${obj.whenRead}\n                    </p>\n                    <div class=\"accordion-arrow__wraper\">\n                        <svg width=\"15\" height=\"9\" viewBox=\"0 0 15 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M1.7625 9L-3.18545e-07 7.28745L7.5 3.27835e-07L15 7.28745L13.2375 9L7.5 3.43725L1.7625 9Z\" fill=\"#111321\"/>\n                        </svg>\n                    </div>\n                </div>\n                <div class=\"accordion-list_panel\"></div>\n            </li>`;\n}\n\nfunction onGetLocaleStorageData(key) {\n    try {\n        return JSON.parse(localStorage.getItem(key)); // получаем массив объектов из Локального Хранилища\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n//========== Функция парсинга данных из JSON файла =================================================\nfunction makeParseJson(stringData) {\n    try {\n        return JSON.parse(stringData);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\n//========== Функкция Добавления Данных в Locale Storage ========================================\nfunction onSetLocaleStorageData(key, data) {\n    try {\n        localStorage.setItem(key, JSON.stringify(data));\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nfunction checkFavouritesByUrl(array, newsLink) {\n    if (!array || array.length === 0) { // проверка на null или пустой массив\n        return;\n    }\n    const compareResult = array.some(item => item.link === newsLink);\n    if (compareResult) {\n        return {\n            class: \"js-favorites\",\n            addRemove: \"Remove from favorites\"\n        };\n    } else {\n        return {\n            class: \"zaglushka\",\n            addRemove: \"Add to favourites\"\n        };\n    }\n     \n}"],"names":["Object","defineProperty","module","exports","value","default","arr","Array","isArray","$f215c72f040a88cf$var$_arrayLikeToArray","obj","parcelRequire","__esModule","len","length","i","arr2","iter","Symbol","iterator","from","TypeError","o","minLen","$7a2c4c4c44c69707$var$_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","test","$6195f07b5409ba15$exports","$6195f07b5409ba15$var$_arrayWithoutHoles","$6195f07b5409ba15$var$_iterableToArray","$6195f07b5409ba15$var$_unsupportedIterableToArray","$6195f07b5409ba15$var$_nonIterableSpread","$6195f07b5409ba15$var$_interopRequireDefault","$5ba9ca3c64df0cad$var$FAVORITES_KEY","$5ba9ca3c64df0cad$var$favorites","$5ba9ca3c64df0cad$var$accordionListRef","document","querySelector","$5ba9ca3c64df0cad$var$onGetLocaleStorageData","key","JSON","parse","localStorage","getItem","error","console","log","$5ba9ca3c64df0cad$var$onSetLocaleStorageData","data","setItem","stringify","addEventListener","event","target","hasAttribute","parsedCardData","stringData","$5ba9ca3c64df0cad$var$makeParseJson","dataset","favorite","dataFromLocaleStorage","classList","contains","textContent","remove","index1","find","card","index","link","splice","removeItem","add","some","$parcel$interopDefault","push","alert","array","forEach","date","firstMurkup","concat","whenRead","insertAdjacentHTML","innerHTML","newsArray","map","newsObject","title","category","_$date","description","imageURL","configReadMarkup","newsLink","item","class","addRemove","$5ba9ca3c64df0cad$var$checkFavouritesByUrl","join","$5ba9ca3c64df0cad$var$onOpenFavorites"],"version":3,"file":"read.8703a32f.js.map"}